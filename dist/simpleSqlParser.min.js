!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.simpleSqlParser=n()}}(function(){return function n(e,t,r){function i(s,o){if(!t[s]){if(!e[s]){var a="function"==typeof require&&require;if(!o&&a)return a(s,!0);if(u)return u(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var p=t[s]={exports:{}};e[s][0].call(p.exports,function(n){var t=e[s][1][n];return i(t?t:n)},p,p.exports,n,e,t,r)}return t[s].exports}for(var u="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(n,e){"use strict";e.exports.sql2ast=n("./src/sql2ast.js"),e.exports.ast2sql=n("./src/ast2sql.js")},{"./src/ast2sql.js":5,"./src/sql2ast.js":6}],2:[function(n,e){var t={};t.Parser=function(){"use strict";function n(e){return this instanceof n?void(this._=e):new n(e)}function e(n,e){return{status:!0,index:n,value:e,furthest:-1,expected:""}}function r(n,e){return{status:!1,index:-1,value:null,furthest:n,expected:e}}function i(n,e){return e?n.furthest>=e.furthest?n:{status:n.status,index:n.index,value:n.value,furthest:e.furthest,expected:e.expected}:n}function u(e){if(!(e instanceof n))throw new Error("not a parser: "+e)}{var s=n.prototype;t.formatError=function(n,e){var t=e.expected,r=e.index;if(r===n.length)return"expected "+t+", got the end of the string";var i=r>0?"'...":"'",u=n.length-r>12?"...'":"'";return"expected "+t+" at character "+r+", got "+i+n.slice(r,r+12)+u}}s.parse=function(n){var e=this.skip(m)._(n,0);return e.status?{status:!0,value:e.value}:{status:!1,index:e.furthest,expected:e.expected}};var o=t.seq=function(){var t=[].slice.call(arguments),r=t.length;return n(function(n,u){for(var s,o=new Array(r),a=0;r>a;a+=1){if(s=i(t[a]._(n,u),s),!s.status)return s;o[a]=s.value,u=s.index}return i(e(u,o),s)})},a=t.seqMap=function(){var n=[].slice.call(arguments),e=n.pop();return o.apply(null,n).map(function(n){return e.apply(null,n)})},l=(t.custom=function(t){return n(t(e,r))},t.alt=function(){var e=[].slice.call(arguments),t=e.length;return 0===t?f("zero alternates"):n(function(n,t){for(var r,u=0;u<e.length;u+=1)if(r=i(e[u]._(n,t),r),r.status)return r;return r})});s.or=function(n){return l(this,n)},s.then=function(n){if("function"==typeof n)throw new Error("chaining features of .then are no longer supported, use .chain instead");return u(n),o(this,n).map(function(n){return n[1]})},s.many=function(){var t=this;return n(function(n,r){for(var u,s=[];;){if(u=i(t._(n,r),u),!u.status)return i(e(r,s),u);r=u.index,s.push(u.value)}})},s.times=function(t,r){arguments.length<2&&(r=t);var u=this;return n(function(n,s){for(var o,a,l=[],p=0;t>p;p+=1){if(o=u._(n,s),a=i(o,a),!o.status)return a;s=o.index,l.push(o.value)}for(;r>p&&(o=u._(n,s),a=i(o,a),o.status);p+=1)s=o.index,l.push(o.value);return i(e(s,l),a)})},s.result=function(n){return this.map(function(){return n})},s.atMost=function(n){return this.times(0,n)},s.atLeast=function(n){return a(this.times(n),this.many(),function(n,e){return n.concat(e)})},s.map=function(t){var r=this;return n(function(n,u){var s=r._(n,u);return s.status?i(e(s.index,t(s.value)),s):s})},s.skip=function(n){return o(this,n).map(function(n){return n[0]})},s.mark=function(){return a(d,this,d,function(n,e,t){return{start:n,value:e,end:t}})},s.desc=function(n){return this.or(f(n))};var p=(t.string=function(t){var i=t.length,u="'"+t+"'";return n(function(n,s){var o=n.slice(s,s+i);return o===t?e(s+i,o):r(s,u)})},t.regex=function(t,i){var u=RegExp("^(?:"+t.source+")",(""+t).slice((""+t).lastIndexOf("/")+1));return null==i&&(i=0),n(function(n,s){var o=u.exec(n.slice(s));if(o){var a=o[0],l=o[i];if(null!=l)return e(s+a.length,l)}return r(s,t)})}),c=t.succeed=function(t){return n(function(n,r){return e(r,t)})},f=t.fail=function(e){return n(function(n,t){return r(t,e)})},m=(t.letter=p(/[a-z]/i).desc("a letter"),t.letters=p(/[a-z]*/i),t.digit=p(/[0-9]/).desc("a digit"),t.digits=p(/[0-9]*/),t.whitespace=p(/\s+/).desc("whitespace"),t.optWhitespace=p(/\s*/),t.any=n(function(n,t){return t>=n.length?r(t,"any character"):e(t+1,n.charAt(t))}),t.all=n(function(n,t){return e(n.length,n.slice(t))}),t.eof=n(function(n,t){return t<n.length?r(t,"EOF"):e(t,null)})),h=t.test=function(t){return n(function(n,i){var u=n.charAt(i);return i<n.length&&t(u)?e(i+1,u):r(i,"a character matching "+t)})},d=(t.oneOf=function(n){return h(function(e){return n.indexOf(e)>=0})},t.noneOf=function(n){return h(function(e){return n.indexOf(e)<0})},t.takeWhile=function(t){return n(function(n,r){for(var i=r;i<n.length&&t(n.charAt(i));)i+=1;return e(i,n.slice(r,i))})},t.lazy=function(e,t){arguments.length<2&&(t=e,e=void 0);var r=n(function(n,e){return r._=t()._,r._(n,e)});return e&&(r=r.desc(e)),r},t.index=n(function(n,t){return e(t,t)}));return s.concat=s.or,s.empty=f("empty"),s.of=n.of=t.of=c,s.ap=function(n){return a(this,n,function(n,e){return n(e)})},s.chain=function(e){var t=this;return n(function(n,r){var u=t._(n,r);if(!u.status)return u;var s=e(u.value);return i(s._(n,u.index),u)})},n}(),e.exports=t},{}],3:[function(n,e,t){e.exports=n("./build/parsimmon.commonjs"),t.version=n("./package.json").version},{"./build/parsimmon.commonjs":2,"./package.json":4}],4:[function(n,e){e.exports={name:"parsimmon",version:"0.6.0",description:"A monadic LL(infinity) parser combinator library",keywords:["parsing","parse","parser combinators"],author:{name:"Jeanine Adkisson",email:"jneen at jneen dot net"},repository:{type:"git",url:"git://github.com/jneen/parsimmon"},files:["index.js","src","test","Makefile","package.json","build/parsimmon.commonjs.js","build/parsimmon.browser.js","build/parsimmon.browser.min.js"],main:"index.js",devDependencies:{mocha:"1.8.x",chai:"1.5.x","uglify-js":"2.x"},dependencies:{pjs:"5.x"},scripts:{test:"make test"},bugs:{url:"https://github.com/jneen/parsimmon/issues"},homepage:"https://github.com/jneen/parsimmon",_id:"parsimmon@0.6.0",_shasum:"6d1615e8cd3913a2a5438720afb7f073aec3e776",_resolved:"https://registry.npmjs.org/parsimmon/-/parsimmon-0.6.0.tgz",_from:"parsimmon@0.6.0",_npmVersion:"1.4.14",_npmUser:{name:"jayferd",email:"jjmadkisson@gmail.com"},maintainers:[{name:"jayferd",email:"jjmadkisson@gmail.com"},{name:"jneen",email:"jneen@jneen.net"}],dist:{shasum:"6d1615e8cd3913a2a5438720afb7f073aec3e776",tarball:"http://registry.npmjs.org/parsimmon/-/parsimmon-0.6.0.tgz"},directories:{}}},{}],5:[function(n,e){"use strict";e.exports=function(n){function e(n){var e="SELECT ";return e+=n.select.map(function(n){return n.expression}).join(", ")}function t(n){var e="FROM ";return e+=n.from.map(function(n){return n.expression}).join(", ")}function r(n){return n.join.map(function(n){var e="";if("inner"===n.type)e+="INNER JOIN ";else if("left"===n.type)e+="LEFT JOIN ";else{if("right"!==n.type)return"";e+="RIGHT JOIN "}return e+=n.table,null!==n.alias&&(e+=" AS "+n.alias),e+=" ON ",e+=n.condition.expression}).join(" ")}function i(n){var e="";return null!==n.where&&(e+="WHERE "+n.where.expression),e}function u(n){var e="";return n.group.length>0&&(e+="GROUP BY ",e+=n.group.map(function(n){return n.expression}).join(", ")),e}function s(n){var e="";return n.order.length>0&&(e+="ORDER BY ",e+=n.order.map(function(n){return n.expression}).join(", ")),e}function o(n){var e="";return null!==n.limit&&(e+="LIMIT ",null!==n.limit.from&&(e+=n.limit.from+", "),e+=n.limit.nb),e}function a(n){return"INSERT INTO "+n.into.expression}function l(n){var e="",t=n.values.filter(function(n){return null!==n.target});return t.length>0&&(e+="(",e+=t.map(function(n){return n.target.expression}).join(", "),e+=") "),e+="VALUES (",e+=n.values.map(function(n){return n.value}).join(", "),e+=")"}function p(n){return"UPDATE "+n.table.expression}function c(n){var e="SET ";return e+=n.values.map(function(n){return n.target.expression+" = "+n.value}).join(", ")}if("object"!=typeof n||n.status!==!0)return!1;n=n.value;var f=[];if("select"===n.type)f.push(e(n)),f.push(t(n)),f.push(r(n)),f.push(i(n)),f.push(u(n)),f.push(s(n)),f.push(o(n));else if("insert"===n.type)f.push(a(n)),f.push(l(n));else if("update"===n.type)f.push(p(n)),f.push(c(n)),f.push(i(n));else{if("delete"!==n.type)return!1;f.push("DELETE"),f.push(t(n)),f.push(i(n))}return f.filter(function(n){return""!==n}).join(" ")}},{}],6:[function(n,e){"use strict";function t(n,e){return"undefined"==typeof e&&(e=[]),n.or(a.succeed(e))}function r(n){return n.join("")}function i(n){return n[0].push(n[1]),n[0]}function u(n){return l(n.skip(m).skip(f(",")).skip(m).many(),n.skip(m)).map(i)}function s(n){return n.replace(/^([`'"])(.*)\1$/,"$2")}function o(n){return l(a.index,n,a.index).map(function(n){var e={start:n[0],end:n[2]};if("object"==typeof n[1]){var t=n[1];return t.position=e,t}return e.out=n[1],e})}var a=n("parsimmon"),l=a.seq,p=a.alt,c=a.regex,f=a.string,m=a.optWhitespace,h=a.whitespace,d=a.lazy,x=p(c(/(?!(FROM|WHERE|GROUP BY|ORDER BY|LIMIT|INNER|LEFT|RIGHT|JOIN|ON|VALUES|SET)\s)[a-z*][a-z0-9_]*/i),c(/`[^`\\]*(?:\\.[^`\\]*)*`/)),v=p(c(/"[^"\\]*(?:\\.[^"\\]*)*"/),c(/'[^'\\]*(?:\\.[^'\\]*)*'/)),g=l(p(c(/[a-zA-Z0-9_]+\(/),f("(")),t(d(function(){return q})).map(r),f(")")).map(r),j=l(x,f("."),x),E=p(f("+"),f("-"),f("*"),f("/"),f("&&"),f("&"),f("~"),f("||"),f("|"),f("^"),c(/XOR/i),f("<=>"),f("="),f("!="),f(">="),f(">>"),f(">"),f("<="),f("<<"),f("<"),c(/IS NULL/i),c(/IS NOT/i),c(/IS NOT NULL/i),c(/IS/i),c(/LIKE/i),c(/NOT LIKE/i),f("%"),c(/MOD/i),c(/NOT/i),c(/OR\s/i),c(/AND/i),c(/IN/i)),y=c(/[-]?\d+\.?\d*/),b=l(f("("),m,l(p(y,v),m,t(f(",")),m,t(p(y,v))).map(r),m,f(")")).map(r),O=l(p(j.map(function(n){return{expression:n.join(""),table:s(n[0]),column:s(n[2])}}),g.map(function(n){return{expression:n,table:null,column:null}}),x.map(function(n){return{expression:n,table:null,column:s(n)}}),v.map(function(n){return{expression:n,table:null,column:null}}),y.map(function(n){return{expression:n,table:null,column:null}}),b.map(function(n){return{expression:n,table:null,column:null}})),t(l(m,E,t(l(m,d(function(){return O}).map(function(n){return n.expression})).map(r),null)).map(r),null)).map(function(n){return null!==n[1]?(n[0]=n[0].expression,{expression:n.join(""),table:null,column:null}):n[0]}),k=l(O,t(l(m,t(c(/AS\s/i)),p(x,v)).map(function(n){var e={};return e.alias=s(n[2]),e.expression=n.join(""),e}),null)).map(function(n){var e=n[0];return e.alias=null!==n[1]?n[1].alias:null,e.expression=e.expression+(null!==n[1]?n[1].expression:""),e}),I=O.map(function(n){return n.expression}),R=l(p(j.map(r),x),t(l(m,t(c(/AS\s/i)),p(x,v)).map(function(n){return{alias:s(n[2]),expression:n.join("")}}),null)).map(function(n){var e={};return e.table=n[0],e.alias=null!==n[1]?n[1].alias:null,e.expression=n[0]+(null!==n[1]?n[1].expression:""),e}),N=l(t(l(c(/INNER|LEFT|RIGHT/i),h).map(function(n){return n[0].toLowerCase()}),null),c(/JOIN/i),m,o(R),m,c(/ON/i),m,o(O)).map(function(n){var e={};return e.type=n[0]||"inner",e.table=n[3].table,e.alias=n[3].alias,e.position=n[3].position,e.condition={expression:n[7].expression,position:n[7].position},e}),T=o(O).map(function(n){return{expression:n.expression,position:n.position}}),w=l(O,t(l(m,c(/ASC|DESC/i)),null)).map(function(n){return{expression:n[0].expression+(null!==n[1]?n[1].join(""):""),order:null!==n[1]?n[1][1]:"ASC",table:n[0].table,column:n[0].column}}),L=l(y,t(l(m,f(","),m,y),null)).map(function(n){return null===n[1]?{from:null,nb:parseInt(n[0],10)}:{from:parseInt(n[0],10),nb:parseInt(n[1][3],10)}}),_=p(j.map(function(n){return{expression:n.join(""),column:s(n[2])}}),x.map(function(n){return{expression:n,column:s(n)}})),S=O.map(function(n){return n.expression}),A=l(_,m,f("="),m,O).map(function(n){return{target:n[0],value:n[4].expression}}),q=l(l(I,m,f(","),m).map(r).many(),I.skip(m)).map(i),D=u(o(k)),M=u(o(R)),U=u(o(O)),z=u(o(w)),F=m.then(N).skip(m).many(),H=u(_),W=u(S),C=u(A),P=l(c(/SELECT/i).skip(m).then(t(D)),c(/FROM/i).skip(m).then(t(M)),t(F),t(c(/WHERE/i).skip(m).then(t(T)),null),t(c(/\s?GROUP BY/i).skip(m).then(t(U))),t(c(/\s?ORDER BY/i).skip(m).then(t(z))),t(c(/\s?LIMIT/i).skip(m).then(t(L)),null)).map(function(n){return{type:"select",select:n[0],from:n[1],join:n[2],where:n[3],group:n[4],order:n[5],limit:n[6]}}),B=l(c(/INSERT INTO/i).skip(m).then(R),m,t(l(f("("),H,f(")")).map(function(n){return n[1]})),m,c(/VALUES\s?\(/i).skip(m).then(W),f(")")).map(function(n){for(var e=[],t=Math.max(n[2].length,n[4].length),r=0;t>r;++r)e[r]={target:n[2][r]||null,value:n[4][r]||null};return{type:"insert",into:n[0],values:e}}),G=l(c(/UPDATE/i).skip(m).then(R),m,c(/SET/i).skip(m).then(C),m,t(c(/WHERE/i).skip(m).then(t(T)),null)).map(function(n){return{type:"update",table:n[0],values:n[2],where:n[4]}}),J=l(c(/DELETE FROM/i).skip(m).then(t(M)),t(c(/WHERE/i).skip(m).then(t(T)),null)).map(function(n){return{type:"delete",from:n[0],where:n[1]}}),Y=p(P,B,G,J);e.exports=function(n){var e=Y.parse(n);return e.status===!1&&(e.error=a.formatError(n,e)),e}},{parsimmon:3}]},{},[1])(1)});